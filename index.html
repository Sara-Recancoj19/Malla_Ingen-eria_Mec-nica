<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Curricular Interactiva</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h2 {
      margin-bottom: 10px;
    }
    #creditos {
      font-weight: bold;
      margin-bottom: 20px;
      font-size: 18px;
      color: #333;
    }
    .malla {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
    }
    .curso {
      border-radius: 8px;
      padding: 10px;
      color: white;
      text-align: center;
      cursor: pointer;
      font-size: 14px;
      position: relative;
    }
    .obligatorio::after {
      content: "✅";
      position: absolute;
      top: 5px;
      right: 5px;
    }
    .aprobado {
      background: #4CAF50;
    }
    .disponible {
      background: #9E9E9E;
    }
    .bloqueado {
      background: #424242;
    }
  </style>
</head>
<body>

  <h2>Malla Curricular</h2>
  <div id="creditos">Créditos aprobados: 0</div>
  <div class="malla" id="malla"></div>

  <script>
    const cursos = [
      {"codigo": "3000", "nombre": "Área Matemática Básica 1", "creditos": 9, "prereq": [], "semestre": 1, "obligatorio": true},
      {"codigo": "3001", "nombre": "Química General 1", "creditos": 7, "prereq": [], "semestre": 1, "obligatorio": true},
      {"codigo": "3003", "nombre": "Área Social Humanística 1", "creditos": 3, "prereq": [], "semestre": 1, "obligatorio": true},
      {"codigo": "3006", "nombre": "Área Matemática Básica 2", "creditos": 9, "prereq": ["3000"], "semestre": 2, "obligatorio": true},
      {"codigo": "3007", "nombre": "Física Básica", "creditos": 5, "prereq": ["3000"], "semestre": 2, "obligatorio": true},
      {"codigo": "3013", "nombre": "Área Matemática Intermedia 1", "creditos": 9, "prereq": ["3006"], "semestre": 3, "obligatorio": true},
      {"codigo": "3014", "nombre": "Física 1", "creditos": 5, "prereq": ["3006","3007"], "semestre": 3, "obligatorio": true},
      {"codigo": "3021", "nombre": "Área Matemática Intermedia 2", "creditos": 6, "prereq": ["3013"], "semestre": 4, "obligatorio": true},
      {"codigo": "3022", "nombre": "Área Matemática Intermedia 3", "creditos": 6, "prereq": ["3013"], "semestre": 4, "obligatorio": true},
      {"codigo": "3023", "nombre": "Física 2", "creditos": 6, "prereq": ["3013","3014"], "semestre": 4, "obligatorio": true},
    ];

    let creditosAprobados = 0;
    const aprobados = new Set(); 

    function renderMalla() {
      const mallaDiv = document.getElementById("malla");
      mallaDiv.innerHTML = "";
      cursos.forEach(curso => {
        let estado = "bloqueado";
        if (curso.prereq.length === 0 || curso.prereq.every(c => aprobados.has(c))) {
          estado = "disponible";
        }
        if (aprobados.has(curso.codigo)) {
          estado = "aprobado";
        }
        const div = document.createElement("div");
        div.className = `curso ${estado} ${curso.obligatorio ? "obligatorio" : ""}`;
        div.textContent = `${curso.nombre} (${curso.creditos} cr)`;
        div.onclick = () => toggleAprobado(curso);
        mallaDiv.appendChild(div);
      });
    }

    function toggleAprobado(curso) {
      if (aprobados.has(curso.codigo)) {
        aprobados.delete(curso.codigo);
        creditosAprobados -= curso.creditos;
      } else {
        aprobados.add(curso.codigo);
        creditosAprobados += curso.creditos;
      }
      document.getElementById("creditos").textContent = `Créditos aprobados: ${creditosAprobados}`;
      renderMalla();
    }

    renderMalla();
  </script>

</body>
</html>
